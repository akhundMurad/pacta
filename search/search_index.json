{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"<p> Architecture Insights, Governance &amp; Versioned Design </p> <p> PyPI \u2022   Docs \u2022   Issues </p> <p> </p> <p>Warning: Experimental. Expect breaking changes until release 0.1.0</p> <p>Pacta turns software architecture into versioned, queryable data \u2014 so teams can see, compare, and reason about architectural change over time, not just block violations.</p> <pre><code>pip install pacta\n</code></pre> <p> </p> <p>Supported languages:</p> <ul> <li>Python</li> <li>Java (coming soon)</li> <li>Go (coming soon)</li> <li>C# (coming soon)</li> </ul>"},{"location":"#why","title":"Why?","text":"<p>Codebases rot. Architecture degrades through small changes no one tracks. Pacta turns architecture into something measurable, reviewable, and enforceable \u2014 catching drift early, not months later.</p>"},{"location":"#what-it-does","title":"What it does","text":"<ul> <li>Architecture snapshots \u2014 version your architecture like code</li> <li>History &amp; trends \u2014 track how dependencies, coupling, and violations evolve over time</li> <li>Diffs \u2014 compare architectural states like Git commits</li> <li>Metrics &amp; insights \u2014 nodes, edges, layers, instability, drift</li> <li>Rules &amp; governance \u2014 express architectural intent and enforce it incrementally</li> <li>Baseline mode \u2014 govern change without being blocked by legacy debt</li> </ul>"},{"location":"#think-of-pacta-like-git-for-architecture","title":"Think of Pacta like Git for architecture","text":"Git Pacta <code>git add</code> <code>pacta snapshot save</code> \u2014 capture an architectural snapshot <code>git commit --verify</code> <code>pacta check</code> \u2014 evaluate rules against a snapshot <code>git commit</code> <code>pacta scan</code> \u2014 snapshot + check in one step <code>git log</code> <code>pacta history</code> \u2014 timeline and trends of architectural states <code>git diff</code> <code>pacta diff</code> \u2014 compare two snapshots branch protection <code>rules.pacta.yml</code> \u2014 governance that prevents drift <p>See the Getting Started guide for a full walkthrough.</p>"},{"location":"#docs","title":"Docs","text":"<ul> <li>CLI Reference</li> <li>Architecture Model</li> <li>Rules DSL</li> </ul>"},{"location":"#roadmap-short","title":"Roadmap (short)","text":"<ul> <li>[x] Open-source CLI and analysis engine</li> <li>[x] Content-addressed snapshots with history tracking</li> <li>[x] Trend analysis with chart export</li> <li>[ ] Architecture visualization (Mermaid, D2)</li> <li>[ ] Health metrics (drift score, instability)</li> <li>[ ] Future: Architecture Intelligence Layer:</li> <li>Cross-repository insights</li> <li>Historical trend analysis</li> <li>Team-level governance and reporting</li> </ul>"},{"location":"#license","title":"License","text":"<p>Apache-2.0. See LICENSE.</p>"},{"location":"architecture/","title":"Architecture Model","text":"<p>The architecture model defines your system structure in YAML.</p>"},{"location":"architecture/#file-format","title":"File Format","text":"<p>Create <code>architecture.yml</code> in your repository root:</p> <pre><code>version: 1\n\nsystem:\n  id: my-system\n  name: My System\n\ncontainers:\n  my-app:\n    name: My Application\n    description: Main application container\n    code:\n      roots:\n        - src\n      layers:\n        ui:\n          name: UI Layer\n          patterns:\n            - src/ui/**\n        application:\n          name: Application Layer\n          patterns:\n            - src/application/**\n        domain:\n          name: Domain Layer\n          patterns:\n            - src/domain/**\n        infra:\n          name: Infrastructure Layer\n          patterns:\n            - src/infra/**\n\ncontexts: {}\n</code></pre>"},{"location":"architecture/#schema","title":"Schema","text":""},{"location":"architecture/#system","title":"system","text":"Field Type Required Description <code>id</code> string Yes Unique system identifier <code>name</code> string Yes Human-readable name"},{"location":"architecture/#containers","title":"containers","text":"<p>Map of container definitions.</p> Field Type Required Description <code>name</code> string Yes Container name <code>description</code> string No Container description <code>context</code> string No Bounded context reference <code>code</code> object No Code mapping configuration"},{"location":"architecture/#code","title":"code","text":"Field Type Required Description <code>roots</code> list Yes Source root directories <code>layers</code> map No Layer definitions"},{"location":"architecture/#layers","title":"layers","text":"<p>Map of layer definitions.</p> Field Type Required Description <code>name</code> string No Layer display name <code>description</code> string No Layer description <code>patterns</code> list Yes Glob patterns matching layer files"},{"location":"architecture/#example-clean-architecture","title":"Example: Clean Architecture","text":"<pre><code>version: 1\n\nsystem:\n  id: healthcare-scheduling\n  name: Healthcare Scheduling\n\ncontainers:\n  scheduling-api:\n    name: Scheduling API\n    context: scheduling\n    code:\n      roots:\n        - services/scheduling-api\n      layers:\n        ui:\n          name: Presentation\n          patterns:\n            - services/scheduling-api/api/**\n        application:\n          name: Use Cases\n          patterns:\n            - services/scheduling-api/app/**\n        domain:\n          name: Domain\n          patterns:\n            - services/scheduling-api/domain/**\n        infra:\n          name: Infrastructure\n          patterns:\n            - services/scheduling-api/infra/**\n</code></pre>"},{"location":"changelog/","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"changelog/#006-2026-01-29","title":"0.0.6 - 2026-01-29","text":""},{"location":"changelog/#added","title":"Added","text":"<ul> <li>reporting: Add GitHub PR markdown renderer with trends and diff detail names</li> <li>cli: Add GitHub report format with snapshot-based trends summary</li> <li>action: Add composite GitHub Action for Pacta architecture review</li> <li>action: Add target_dir input to control scan root</li> </ul>"},{"location":"changelog/#documentation","title":"Documentation","text":"<ul> <li>Add GitHub Action integration guide and document github output format</li> <li>ci-integration: Add GitHub Action comment example and document target_dir input</li> </ul>"},{"location":"changelog/#miscellaneous","title":"Miscellaneous","text":"<ul> <li>Update changelog for v0.0.5</li> <li>ci: Simplify changelog PR workflow</li> <li>cli: Remove unused future annotations import from _trends.py</li> <li>ci: Update test-action workflow to use simple-layered-app example</li> <li>examples: Track pacta snapshots for simple-layered-app</li> <li>gitignore: Remove test-action GitHub workflow</li> <li>examples/simple-layered-app: Remove pacta snapshot objects and latest ref</li> </ul>"},{"location":"changelog/#ci","title":"Ci","text":"<ul> <li>Add workflow to test action and support local pacta install option</li> </ul>"},{"location":"changelog/#005-2026-01-27","title":"0.0.5 - 2026-01-27","text":""},{"location":"changelog/#added_1","title":"Added","text":"<ul> <li>cli: Add <code>check</code> command to evaluate rules against saved snapshots</li> <li>cli: Document new <code>pacta check</code> command and two-step snapshot workflow</li> </ul>"},{"location":"changelog/#changed","title":"Changed","text":"<ul> <li>Format argparse argument and remove unused import</li> </ul>"},{"location":"changelog/#documentation_1","title":"Documentation","text":"<ul> <li>Add new example docs pages and example projects (layered, hexagonal, legacy migration)</li> <li>Update CLI and examples for snapshot save/check workflow</li> </ul>"},{"location":"changelog/#fixed","title":"Fixed","text":"<ul> <li>check: Update existing snapshot object in-place and save optional extra ref</li> <li>ci: Use --force-with-lease when pushing changelog updates</li> </ul>"},{"location":"changelog/#testing","title":"Testing","text":"<ul> <li>cli: Reformat assertion for save refs call args</li> </ul>"},{"location":"changelog/#004-2026-01-26","title":"0.0.4 - 2026-01-26","text":""},{"location":"changelog/#documentation_2","title":"Documentation","text":"<ul> <li>Refresh README and getting started with architecture snapshot/history narrative</li> </ul>"},{"location":"changelog/#miscellaneous_1","title":"Miscellaneous","text":"<ul> <li>ci: Create PR for changelog updates instead of pushing to main</li> </ul>"},{"location":"changelog/#003-2026-01-25","title":"0.0.3 - 2026-01-25","text":""},{"location":"changelog/#added_2","title":"Added","text":"<ul> <li>cli: Show human-readable violation explanations in text output</li> <li>cli: Add history commands and content-addressed snapshot store</li> <li>cli: Add <code>history trends</code> with ASCII charts and optional matplotlib export</li> <li>docs: Document history trends command and add chart example</li> <li>model: Add optional layer name field and load from spec</li> </ul>"},{"location":"changelog/#documentation_3","title":"Documentation","text":"<ul> <li>contributing: Expand contributing guide with project structure and dev workflow</li> <li>readme: Reposition as architecture governance tool and add demo gif</li> <li>Add changelog and expand MkDocs documentation</li> </ul>"},{"location":"changelog/#miscellaneous_2","title":"Miscellaneous","text":"<ul> <li>license: Switch to Apache-2.0 and bump version to 0.0.2</li> <li>Apply formatting and typing tweaks in history output and tests</li> <li>cli: Remove redundant module docstrings and future imports from chart modules</li> <li>dev: Add pytest-cov to dev dependencies</li> </ul>"},{"location":"changelog/#002-2026-01-23","title":"0.0.2 - 2026-01-23","text":""},{"location":"changelog/#miscellaneous_3","title":"Miscellaneous","text":"<ul> <li>license: Switch to Apache-2.0 and bump version to 0.0.2</li> </ul>"},{"location":"changelog/#001-2026-01-23","title":"[0.0.1] - 2026-01-23","text":""},{"location":"ci-integration/","title":"CI/CD Integration","text":"<p>Pacta is designed for CI/CD pipelines. This guide shows how to integrate architecture checks into your workflow.</p>"},{"location":"ci-integration/#exit-codes","title":"Exit Codes","text":"Code Meaning <code>0</code> Success, no violations (or no new violations with baseline) <code>1</code> Violations found <code>2</code> Engine error (config issue, parse error, etc.)"},{"location":"ci-integration/#github-actions","title":"GitHub Actions","text":""},{"location":"ci-integration/#basic-check","title":"Basic Check","text":"<p>Run architecture validation on every pull request:</p> <pre><code>name: Architecture Check\n\non:\n  pull_request:\n    branches: [main]\n\njobs:\n  architecture:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-python@v5\n        with:\n          python-version: '3.11'\n\n      - name: Install Pacta\n        run: pip install pacta\n\n      - name: Check Architecture\n        run: pacta scan . --model architecture.yml --rules rules.pacta.yml\n</code></pre>"},{"location":"ci-integration/#with-baseline-recommended","title":"With Baseline (Recommended)","text":"<p>For existing projects with legacy violations, use baselines to only fail on new violations:</p> <pre><code>name: Architecture Check\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  architecture:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-python@v5\n        with:\n          python-version: '3.11'\n\n      - name: Install Pacta\n        run: pip install pacta\n\n      # On main branch: update baseline\n      - name: Update Baseline\n        if: github.ref == 'refs/heads/main'\n        run: |\n          pacta scan . \\\n            --model architecture.yml \\\n            --rules rules.pacta.yml \\\n            --save-ref baseline\n\n      # On PR: check against baseline\n      - name: Check Against Baseline\n        if: github.event_name == 'pull_request'\n        run: |\n          pacta scan . \\\n            --model architecture.yml \\\n            --rules rules.pacta.yml \\\n            --baseline baseline\n</code></pre> <p>Persisting baselines</p> <p>The baseline is stored in <code>.pacta/snapshots/</code>. Commit this directory to your repository, or use GitHub Actions cache/artifacts to persist it between runs.</p>"},{"location":"ci-integration/#pacta-github-action-recommended","title":"Pacta GitHub Action (Recommended)","text":"<p>The simplest way to get rich architectural PR comments. Uses <code>--format github</code> to generate a descriptive Markdown comment with structural changes, violation details, and architecture trends:</p> <pre><code>name: Architecture Check\n\non:\n  pull_request:\n    branches: [main]\n\njobs:\n  architecture:\n    runs-on: ubuntu-latest\n    permissions:\n      pull-requests: write\n    steps:\n      - uses: actions/checkout@v4\n      - uses: pacta-dev/pacta-cli@main\n        with:\n          model: architecture.yml\n          rules: rules.pacta.yml\n          baseline: baseline\n</code></pre> <p>The action will:</p> <ul> <li>Run <code>pacta scan</code> with <code>--format github</code> to produce a rich Markdown report</li> <li>Post (or update) a PR comment with structural changes, new/fixed violations, and architecture trends</li> <li>Fail the check if new violations are introduced (configurable via <code>fail-on-violations: false</code>)</li> </ul> <p>Example comment:</p> <p></p> <p>Action Inputs:</p> Input Default Description <code>target_dir</code> <code>.</code> Repository root <code>model</code> <code>architecture.yml</code> Path to architecture model <code>rules</code> <code>rules.pacta.yml</code> Path to rules file <code>baseline</code> (none) Baseline ref for incremental checks <code>python-version</code> <code>3.11</code> Python version <code>fail-on-violations</code> <code>true</code> Fail if new violations found <code>pacta-version</code> <code>pacta</code> Pacta package specifier"},{"location":"ci-integration/#json-output-for-pr-comments","title":"JSON Output for PR Comments","text":"<p>Generate JSON output and post results as a PR comment:</p> <pre><code>name: Architecture Check\n\non:\n  pull_request:\n    branches: [main]\n\njobs:\n  architecture:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-python@v5\n        with:\n          python-version: '3.11'\n\n      - name: Install Pacta\n        run: pip install pacta\n\n      - name: Run Architecture Check\n        id: pacta\n        continue-on-error: true\n        run: |\n          pacta scan . \\\n            --model architecture.yml \\\n            --rules rules.pacta.yml \\\n            --baseline baseline \\\n            --format json &gt; results.json\n\n          # Extract summary for PR comment\n          VIOLATIONS=$(jq '.summary.total_violations' results.json)\n          NEW=$(jq '.summary.new_violations // 0' results.json)\n          echo \"violations=$VIOLATIONS\" &gt;&gt; $GITHUB_OUTPUT\n          echo \"new=$NEW\" &gt;&gt; $GITHUB_OUTPUT\n\n      - name: Comment on PR\n        uses: actions/github-script@v7\n        with:\n          script: |\n            const violations = ${{ steps.pacta.outputs.violations }};\n            const newViolations = ${{ steps.pacta.outputs.new }};\n\n            let body;\n            if (violations === 0) {\n              body = '### Architecture Check Passed\\n\\nNo architectural violations found.';\n            } else if (newViolations === 0) {\n              body = `### Architecture Check Passed\\n\\n${violations} existing violation(s), 0 new.`;\n            } else {\n              body = `### Architecture Check Failed\\n\\n**${newViolations} new violation(s)** introduced.\\n\\nRun \\`pacta scan\\` locally to see details.`;\n            }\n\n            github.rest.issues.createComment({\n              issue_number: context.issue.number,\n              owner: context.repo.owner,\n              repo: context.repo.repo,\n              body: body\n            });\n\n      - name: Fail on New Violations\n        if: steps.pacta.outputs.new &gt; 0\n        run: exit 1\n</code></pre>"},{"location":"ci-integration/#gitlab-ci","title":"GitLab CI","text":""},{"location":"ci-integration/#basic-check_1","title":"Basic Check","text":"<pre><code>architecture:\n  stage: test\n  image: python:3.11\n  script:\n    - pip install pacta\n    - pacta scan . --model architecture.yml --rules rules.pacta.yml\n</code></pre>"},{"location":"ci-integration/#with-baseline","title":"With Baseline","text":"<pre><code>stages:\n  - test\n\nvariables:\n  PACTA_BASELINE: baseline\n\narchitecture:\n  stage: test\n  image: python:3.11\n  script:\n    - pip install pacta\n    - |\n      if [ \"$CI_COMMIT_BRANCH\" = \"main\" ]; then\n        # Update baseline on main\n        pacta scan . --model architecture.yml --rules rules.pacta.yml --save-ref $PACTA_BASELINE\n      else\n        # Check against baseline on feature branches\n        pacta scan . --model architecture.yml --rules rules.pacta.yml --baseline $PACTA_BASELINE\n      fi\n  cache:\n    paths:\n      - .pacta/\n</code></pre>"},{"location":"ci-integration/#pre-commit-hook","title":"Pre-commit Hook","text":"<p>Run Pacta as a pre-commit hook to catch violations before they're committed:</p> <pre><code># .pre-commit-config.yaml\nrepos:\n  - repo: local\n    hooks:\n      - id: pacta\n        name: Architecture Check\n        entry: pacta scan . --model architecture.yml --rules rules.pacta.yml -q\n        language: system\n        pass_filenames: false\n        types: [python]\n</code></pre> <p>Performance</p> <p>Use <code>-q</code> (quiet mode) for faster output in hooks. Consider running against baseline for large codebases with legacy violations.</p>"},{"location":"ci-integration/#makefile-integration","title":"Makefile Integration","text":"<p>Add Pacta to your Makefile for easy local runs:</p> <pre><code>.PHONY: arch arch-snapshot arch-check arch-baseline arch-ci\n\n# Full scan (snapshot + check in one step)\narch:\n    pacta scan . --model architecture.yml --rules rules.pacta.yml\n\n# Two-step workflow\narch-snapshot:\n    pacta snapshot save . --model architecture.yml\n\narch-check:\n    pacta check . --rules rules.pacta.yml\n\n# Update baseline\narch-baseline:\n    pacta snapshot save . --model architecture.yml --ref baseline\n    pacta check . --ref baseline --rules rules.pacta.yml\n\n# Check against baseline (CI mode)\narch-ci:\n    pacta scan . --model architecture.yml --rules rules.pacta.yml --baseline baseline\n</code></pre>"},{"location":"ci-integration/#json-schema","title":"JSON Schema","text":"<p>The <code>--format json</code> output follows this structure:</p> <pre><code>{\n  \"run_info\": {\n    \"tool_version\": \"0.0.7\",\n    \"timestamp\": \"2025-01-22T12:00:00+00:00\",\n    \"commit\": \"abc1234\",\n    \"branch\": \"main\"\n  },\n  \"summary\": {\n    \"total_violations\": 5,\n    \"by_severity\": {\n      \"error\": 3,\n      \"warning\": 2\n    },\n    \"new_violations\": 1,\n    \"existing_violations\": 4,\n    \"fixed_violations\": 0\n  },\n  \"violations\": [\n    {\n      \"rule_id\": \"no_domain_to_infra\",\n      \"rule_name\": \"Domain cannot depend on Infrastructure\",\n      \"severity\": \"error\",\n      \"status\": \"new\",\n      \"location\": {\n        \"file\": \"src/domain/user.py\",\n        \"line\": 3,\n        \"column\": 1\n      },\n      \"message\": \"Domain layer must not import from Infrastructure\",\n      \"suggestion\": \"Use dependency injection...\",\n      \"explanation\": \"\\\"myapp.domain.UserService\\\" in domain layer imports \\\"myapp.infra.Database\\\" in infra layer\"\n    }\n  ]\n}\n</code></pre> <p>Use <code>jq</code> to extract specific fields:</p> <pre><code># Get new violation count\npacta scan . --format json | jq '.summary.new_violations'\n\n# List files with violations\npacta scan . --format json | jq -r '.violations[].location.file' | sort -u\n\n# Filter only errors\npacta scan . --format json | jq '.violations | map(select(.severity == \"error\"))'\n</code></pre>"},{"location":"cli/","title":"CLI Reference","text":""},{"location":"cli/#scan","title":"scan","text":"<p>Scan repository and evaluate architectural rules.</p> <pre><code>pacta scan [PATH] [OPTIONS]\n</code></pre> <p>Arguments:</p> Argument Default Description <code>PATH</code> <code>.</code> Repository root <p>Options:</p> Option Default Description <code>--model FILE</code> <code>architecture.yml</code> Architecture model file <code>--rules FILE</code> <code>rules.pacta.yml</code> Rules file (repeatable) <code>--format {text,json,github}</code> <code>text</code> Output format (<code>github</code> produces Markdown for PR comments) <code>--baseline REF</code> - Compare against baseline snapshot <code>--save-ref REF</code> - Save snapshot under this ref <code>--mode {full,changed_only}</code> <code>full</code> Evaluation mode <code>-q, --quiet</code> - Summary only <code>-v, --verbose</code> - Include all details <p>Examples:</p> <pre><code># Basic scan\npacta scan . --model architecture.yml --rules rules.pacta.yml\n\n# Quiet mode (CI-friendly)\npacta scan . --model architecture.yml --rules rules.pacta.yml -q\n\n# Save baseline\npacta scan . --model architecture.yml --rules rules.pacta.yml --save-ref baseline\n\n# Check against baseline (fail only on new violations)\npacta scan . --model architecture.yml --rules rules.pacta.yml --baseline baseline\n\n# JSON output for CI integration\npacta scan . --model architecture.yml --rules rules.pacta.yml --format json\n</code></pre> <p>Example output:</p> <pre><code>\u2717 1 violations (1 error)\n\n  \u2717 ERROR [no-domain-infra] Domain cannot depend on Infrastructure @ src/domain/service.py:5:1\n    status: new\n    \"app.domain.BillingService\" in domain layer imports \"app.infra.PostgresClient\" in infra layer\n</code></pre> <p>Violations are displayed with human-readable explanations:</p> <ul> <li>For dependency violations: Shows which module imports/calls/uses another, with their respective layers</li> <li>For node violations: Shows the element type and where it was found (layer, container, context)</li> </ul>"},{"location":"cli/#check","title":"check","text":"<p>Evaluate architectural rules against an existing snapshot and write violations back into it.</p> <p>This separates the \"capture\" step (<code>snapshot save</code>) from the \"verify\" step (<code>check</code>), allowing you to snapshot your architecture once and check it against different rule sets or at different times. The existing snapshot object is updated in-place \u2014 no new snapshot is created.</p> <pre><code>pacta check [PATH] [OPTIONS]\n</code></pre> <p>Arguments:</p> Argument Default Description <code>PATH</code> <code>.</code> Repository root <p>Options:</p> Option Default Description <code>--ref REF</code> <code>latest</code> Snapshot ref to check <code>--model FILE</code> <code>architecture.yml</code> Architecture model file <code>--rules FILE</code> <code>rules.pacta.yml</code> Rules file (repeatable) <code>--format {text,json,github}</code> <code>text</code> Output format (<code>github</code> produces Markdown for PR comments) <code>--baseline REF</code> - Compare against baseline snapshot <code>--save-ref REF</code> - Also save result under this ref <code>-q, --quiet</code> - Summary only <code>-v, --verbose</code> - Include all details <p>Examples:</p> <pre><code># Check latest snapshot against rules\npacta check . --rules rules.pacta.yml\n\n# Check a specific snapshot ref\npacta check . --ref v1 --rules rules.pacta.yml\n\n# Check against baseline (only new violations fail)\npacta check . --baseline baseline --rules rules.pacta.yml\n\n# JSON output\npacta check . --rules rules.pacta.yml --format json\n</code></pre> <p>Typical workflow:</p> <pre><code># Step 1: Capture architecture\npacta snapshot save . --model architecture.yml\n\n# Step 2: Evaluate rules against the snapshot\npacta check . --rules rules.pacta.yml\n\n# Or do both in one step:\npacta scan . --model architecture.yml --rules rules.pacta.yml\n</code></pre>"},{"location":"cli/#snapshot-save","title":"snapshot save","text":"<p>Save architecture snapshot without running rules.</p> <pre><code>pacta snapshot save [PATH] [OPTIONS]\n</code></pre> <p>Options:</p> Option Default Description <code>--ref REF</code> <code>latest</code> Snapshot reference name <code>--model FILE</code> <code>architecture.yml</code> Architecture model file <p>Examples:</p> <pre><code># Save snapshot\npacta snapshot save . --model architecture.yml --ref v1\n\n# Save another version\npacta snapshot save . --model architecture.yml --ref v2\n</code></pre>"},{"location":"cli/#diff","title":"diff","text":"<p>Compare two architecture snapshots.</p> <pre><code>pacta diff [PATH] --from REF --to REF\n</code></pre> <p>Options:</p> Option Required Description <code>--from REF</code> Yes Source snapshot ref <code>--to REF</code> Yes Target snapshot ref <p>Examples:</p> <pre><code># Compare snapshots\npacta diff . --from v1 --to v2\n</code></pre>"},{"location":"cli/#history-show","title":"history show","text":"<p>View architecture timeline (list of snapshots).</p> <pre><code>pacta history show [PATH] [OPTIONS]\n</code></pre> <p>Options:</p> Option Default Description <code>--last N</code> - Show only last N entries <code>--since DATE</code> - Show entries since date (ISO-8601) <code>--branch NAME</code> - Filter by branch name <code>--format {text,json}</code> <code>text</code> Output format <p>Examples:</p> <pre><code># Show all snapshots\npacta history show .\n\n# Show last 10 entries\npacta history show . --last 10\n\n# Filter by branch and date\npacta history show . --branch main --since 2025-01-01\n\n# JSON output for scripting\npacta history show . --format json\n</code></pre> <p>Example output:</p> <pre><code>Architecture Timeline (3 entries)\n============================================================\n\na1b2c3d4  2025-01-22  abc1234  main          42 nodes   87 edges   2 violations (latest)\ne5f6g7h8  2025-01-20  def5678  main          42 nodes   85 edges   4 violations\n12345678  2025-01-18  789abcd  feature/x     40 nodes   82 edges   3 violations\n</code></pre>"},{"location":"cli/#history-export","title":"history export","text":"<p>Export full history data for external processing or SaaS integration.</p> <pre><code>pacta history export [PATH] [OPTIONS]\n</code></pre> <p>Options:</p> Option Default Description <code>--format {json,jsonl}</code> <code>json</code> Export format <code>-o, --output FILE</code> stdout Output file path <p>Examples:</p> <pre><code># Export as JSON\npacta history export . --format json &gt; history.json\n\n# Export as JSON Lines (one entry per line)\npacta history export . --format jsonl &gt; history.jsonl\n\n# Export to file\npacta history export . -o export.json\n</code></pre> <p>JSON output structure:</p> <pre><code>{\n  \"version\": 1,\n  \"exported_at\": \"2025-01-22T12:00:00\",\n  \"repo_root\": \"/path/to/repo\",\n  \"refs\": {\n    \"latest\": \"a1b2c3d4\",\n    \"baseline\": \"e5f6g7h8\"\n  },\n  \"entries\": [\n    {\n      \"hash\": \"a1b2c3d4\",\n      \"timestamp\": \"2025-01-22T12:00:00+00:00\",\n      \"commit\": \"abc1234\",\n      \"branch\": \"main\",\n      \"refs\": [\"latest\"],\n      \"node_count\": 42,\n      \"edge_count\": 87,\n      \"violations\": [...]\n    }\n  ]\n}\n</code></pre>"},{"location":"cli/#history-trends","title":"history trends","text":"<p>Show metric trends over time with ASCII charts or export as images.</p> <pre><code>pacta history trends [PATH] [OPTIONS]\n</code></pre> <p>Options:</p> Option Default Description <code>--metric {violations,nodes,edges,density}</code> <code>violations</code> Metric to track <code>--last N</code> - Show only last N entries <code>--since DATE</code> - Show entries since date (ISO-8601) <code>--branch NAME</code> - Filter by branch name <code>--width N</code> <code>60</code> Chart width in characters <code>--format {text,json}</code> <code>text</code> Output format <code>-o, --output FILE</code> - Export chart as image (PNG/SVG) <p>Metrics:</p> Metric Description <code>violations</code> Total violation count (default) <code>nodes</code> Architecture component count <code>edges</code> Dependency count <code>density</code> Coupling ratio (edges/nodes) <p>Examples:</p> <pre><code># Show violation trends (default)\npacta history trends .\n\n# Show node count trends\npacta history trends . --metric nodes\n\n# Show density trends (edges/nodes ratio)\npacta history trends . --metric density\n\n# Filter by branch and limit\npacta history trends . --branch main --last 10\n\n# JSON output for scripting\npacta history trends . --format json\n\n# Export as PNG image (requires pacta[viz])\npacta history trends . --output trends.png\n\n# Export as SVG for docs/presentations\npacta history trends . --metric violations --output violations.svg\n</code></pre> <p>Image Export:</p> <p>To export charts as images, install the visualization extras:</p> <pre><code>pip install pacta[viz]\n</code></pre> <p>This adds matplotlib support for PNG, SVG, and PDF export.</p> <p></p> <p>Example output:</p> <pre><code>Violations Trend (5 entries)\n============================\n\n  5 |      *\n  4 |  *       *\n  3 |              *\n  2 |                  *\n  1 |\n  0 |\n    +--------------------\n      Jan 15      Jan 22\n\nTrend: Improving (-3 over period)\nFirst: 4 violations (Jan 15)\nLast:  2 violations (Jan 22)\n\nAverage: 3 violations\nMin: 2, Max: 5\n</code></pre>"},{"location":"cli/#exit-codes","title":"Exit Codes","text":"Code Meaning <code>0</code> Success, no violations <code>1</code> Violations found <code>2</code> Engine error"},{"location":"configuration/","title":"Configuration Reference","text":"<p>Complete schema documentation for Pacta configuration files.</p>"},{"location":"configuration/#architectureyml","title":"architecture.yml","text":"<p>The architecture model file defines your system structure, containers, and layers.</p>"},{"location":"configuration/#full-schema","title":"Full Schema","text":"<pre><code>version: 1                    # Required, must be 1\n\nsystem:\n  id: string                  # Required, unique identifier\n  name: string                # Required, display name\n\ncontainers:\n  &lt;container-id&gt;:             # Container identifier (e.g., backend, api)\n    name: string              # Optional, display name\n    description: string       # Optional, description\n    code:\n      roots:                  # Required, directories to scan\n        - string              # Relative paths from repo root\n      layers:\n        &lt;layer-id&gt;:           # Layer identifier (e.g., domain, infra)\n          name: string        # Optional, display name\n          description: string # Optional, description\n          patterns:           # Required, glob patterns\n            - string          # Patterns matching files in this layer\n\ncontexts:                     # Optional, bounded contexts\n  &lt;context-id&gt;:\n    name: string\n    containers:\n      - string                # Container IDs in this context\n\nrelations:                    # Optional, high-level container relations\n  - from: string              # Container ID\n    to: string                # Container ID\n    type: string              # Relation type (e.g., uses, calls)\n</code></pre>"},{"location":"configuration/#fields-reference","title":"Fields Reference","text":""},{"location":"configuration/#system","title":"system","text":"Field Type Required Description <code>id</code> string Yes Unique identifier for the system <code>name</code> string Yes Human-readable name"},{"location":"configuration/#containers","title":"containers","text":"Field Type Required Description <code>name</code> string No Human-readable name <code>description</code> string No Container description <code>code.roots</code> list[string] Yes Directories to scan for source code <code>code.layers</code> map Yes Layer definitions"},{"location":"configuration/#layers","title":"layers","text":"Field Type Required Description <code>name</code> string No Human-readable name <code>description</code> string No Layer description <code>patterns</code> list[string] Yes Glob patterns matching files in this layer <p>Glob pattern examples:</p> Pattern Matches <code>src/domain/**</code> All files under <code>src/domain/</code> recursively <code>src/domain/*.py</code> Python files directly in <code>src/domain/</code> <code>src/**/models.py</code> Any <code>models.py</code> under <code>src/</code> <code>!src/domain/tests/**</code> Exclude (negate) test files"},{"location":"configuration/#example-clean-architecture","title":"Example: Clean Architecture","text":"<pre><code>version: 1\nsystem:\n  id: ecommerce\n  name: E-Commerce Platform\n\ncontainers:\n  order-service:\n    name: Order Service\n    description: Handles order processing and management\n    code:\n      roots:\n        - services/orders/src\n      layers:\n        domain:\n          name: Domain Layer\n          description: Core business logic and entities\n          patterns:\n            - services/orders/src/domain/**\n        application:\n          name: Application Layer\n          description: Use cases and orchestration\n          patterns:\n            - services/orders/src/application/**\n        infrastructure:\n          name: Infrastructure Layer\n          description: External services and persistence\n          patterns:\n            - services/orders/src/infrastructure/**\n        presentation:\n          name: Presentation Layer\n          description: API controllers and DTOs\n          patterns:\n            - services/orders/src/api/**\n</code></pre>"},{"location":"configuration/#rulespactayml","title":"rules.pacta.yml","text":"<p>The rules file defines architectural constraints using Pacta's rule DSL.</p>"},{"location":"configuration/#full-schema_1","title":"Full Schema","text":"<pre><code>rule:\n  id: string                  # Required, unique rule identifier\n  name: string                # Required, human-readable name\n  description: string         # Optional, detailed description\n  severity: error|warning|info # Required\n  target: dependency|node     # Required, what to evaluate\n  when:                       # Required, conditions\n    all:                      # All conditions must match\n      - &lt;condition&gt;\n    any:                      # Any condition must match\n      - &lt;condition&gt;\n  action: forbid|allow|require # Required\n  message: string             # Optional, shown on violation\n  suggestion: string          # Optional, how to fix\n</code></pre>"},{"location":"configuration/#fields-reference_1","title":"Fields Reference","text":""},{"location":"configuration/#rule-fields","title":"Rule Fields","text":"Field Type Required Description <code>id</code> string Yes Unique identifier (used in output) <code>name</code> string Yes Human-readable rule name <code>description</code> string No Detailed explanation <code>severity</code> enum Yes <code>error</code>, <code>warning</code>, or <code>info</code> <code>target</code> enum Yes <code>dependency</code> (edges) or <code>node</code> (vertices) <code>when</code> object Yes Conditions that trigger the rule <code>action</code> enum Yes <code>forbid</code>, <code>allow</code>, or <code>require</code> <code>message</code> string No Explanation shown on violation (auto-generated if omitted) <code>suggestion</code> string No How to fix the issue"},{"location":"configuration/#severity-levels","title":"Severity Levels","text":"Level Description CI Behavior <code>error</code> Critical violation Fails CI (exit code 1) <code>warning</code> Should be addressed Reported but doesn't fail <code>info</code> Informational Tracked for visibility"},{"location":"configuration/#condition-syntax","title":"Condition Syntax","text":"<p>Property access:</p> Property Target Description <code>from.layer</code> dependency Source node's layer <code>to.layer</code> dependency Target node's layer <code>from.container</code> dependency Source node's container <code>to.container</code> dependency Target node's container <code>layer</code> node Node's layer <code>container</code> node Node's container <code>kind</code> node Node type (module, class, function) <p>Operators:</p> Operator Example Description <code>==</code> <code>from.layer == domain</code> Equality <code>!=</code> <code>to.layer != infra</code> Inequality <code>in</code> <code>from.layer in [domain, application]</code> Value in list <code>not_in</code> <code>to.layer not_in [infra, external]</code> Value not in list <code>glob</code> <code>from.fqname glob \"*.service.*\"</code> Glob pattern match <code>matches</code> <code>from.fqname matches \".*Service$\"</code> Regex match <code>contains</code> <code>tags contains \"legacy\"</code> Collection contains value <p>Combinators:</p> <pre><code># All conditions must be true (AND)\nwhen:\n  all:\n    - from.layer == domain\n    - to.layer == infra\n\n# Any condition must be true (OR)\nwhen:\n  any:\n    - to.layer == infra\n    - to.layer == external\n\n# Nested combinators\nwhen:\n  all:\n    - from.layer == domain\n    - any:\n        - to.layer == infra\n        - to.layer == external\n</code></pre>"},{"location":"configuration/#example-complete-rules-file","title":"Example: Complete Rules File","text":"<pre><code># Domain cannot depend on Infrastructure\nrule:\n  id: no_domain_to_infra\n  name: Domain must not depend on Infrastructure\n  description: |\n    The domain layer contains pure business logic and should not\n    depend on technical implementation details.\n  severity: error\n  target: dependency\n  when:\n    all:\n      - from.layer == domain\n      - to.layer == infrastructure\n  action: forbid\n  message: Domain layer must not import from Infrastructure layer\n  suggestion: Use dependency injection and define interfaces in the domain layer\n\n---\n# Domain cannot depend on Presentation\nrule:\n  id: no_domain_to_presentation\n  name: Domain must not depend on Presentation\n  severity: error\n  target: dependency\n  when:\n    all:\n      - from.layer == domain\n      - to.layer == presentation\n  action: forbid\n  message: Domain layer must not depend on Presentation layer\n\n---\n# Application can use Domain (allowed, tracked for info)\nrule:\n  id: app_uses_domain\n  name: Application uses Domain\n  severity: info\n  target: dependency\n  when:\n    all:\n      - from.layer == application\n      - to.layer == domain\n  action: allow\n  message: Application layer correctly using Domain layer\n</code></pre>"},{"location":"configuration/#pacta-directory","title":".pacta/ Directory","text":"<p>Pacta stores data in a <code>.pacta/</code> directory at your repository root.</p> <pre><code>.pacta/\n\u2514\u2500\u2500 snapshots/\n    \u251c\u2500\u2500 objects/             # Content-addressed snapshot storage\n    \u2502   \u251c\u2500\u2500 a1b2c3d4.json    # 8-char hash prefix filename\n    \u2502   \u251c\u2500\u2500 e5f6a7b8.json\n    \u2502   \u2514\u2500\u2500 ...\n    \u2514\u2500\u2500 refs/                # Named references to snapshots\n        \u251c\u2500\u2500 latest           # Text file containing hash of most recent snapshot\n        \u251c\u2500\u2500 baseline         # Text file containing hash (created with --save-ref)\n        \u2514\u2500\u2500 ...\n</code></pre>"},{"location":"configuration/#snapshots","title":"Snapshots","text":"<p>Snapshots are content-addressed (stored by hash of contents). They include:</p> <ul> <li>Architecture IR (nodes and edges)</li> <li>Violation list</li> <li>Metadata (timestamp, commit, branch, tool version)</li> </ul>"},{"location":"configuration/#references","title":"References","text":"<p>References are named pointers to snapshot hashes:</p> Ref Description <code>latest</code> Automatically updated on each scan/check <code>baseline</code> Created with <code>--save-ref baseline</code> Custom Any name you choose with <code>--save-ref &lt;name&gt;</code>"},{"location":"configuration/#git-integration","title":"Git Integration","text":"<p>Recommended: Commit <code>.pacta/</code> to version control for:</p> <ul> <li>Persistent baselines across team members</li> <li>History tracking with commits</li> <li>CI/CD baseline comparison</li> </ul> <p>Add to <code>.gitignore</code> only if you don't need persistent baselines:</p> <pre><code># Ignore Pacta data (not recommended)\n.pacta/\n</code></pre>"},{"location":"getting-started/","title":"Getting Started","text":"<p>You're six months into a project. The codebase that started clean now has database calls in the domain layer, circular dependencies nobody remembers adding, and a \"quick fix\" that coupled two services together. You know the architecture drifted \u2014 but when? How much? Is it getting worse?</p> <p>Pacta answers these questions. It versions your architecture like Git versions your code, so you can see exactly how your system evolves over time.</p>"},{"location":"getting-started/#your-first-snapshot","title":"Your First Snapshot","text":"<p>Install Pacta:</p> <pre><code>pip install pacta\n</code></pre> <p>Create <code>architecture.yml</code> to describe your system's layers:</p> <pre><code>version: 1\nsystem:\n  id: myapp\n  name: My Application\n\ncontainers:\n  backend:\n    code:\n      roots: [src]\n      layers:\n        domain:\n          patterns: [src/domain/**]\n        application:\n          patterns: [src/application/**]\n        infra:\n          patterns: [src/infra/**]\n</code></pre> <p>Now capture a snapshot:</p> <pre><code>pacta snapshot save . --model architecture.yml\n</code></pre> <p>Pacta just analyzed every module and dependency in your codebase and stored a content-addressed snapshot in <code>.pacta/</code>. This snapshot is immutable \u2014 a permanent record of your architecture at this moment.</p>"},{"location":"getting-started/#watching-architecture-change","title":"Watching Architecture Change","text":"<p>A week passes. Your team ships features, fixes bugs, refactors code. Run another snapshot:</p> <pre><code>pacta snapshot save . --model architecture.yml\n</code></pre> <p>Now you have two points in time. See what changed:</p> <pre><code>pacta history show --last 5\n</code></pre> <pre><code>TIMESTAMP            SNAPSHOT    NODES  EDGES  VIOLATIONS\n2024-01-22 14:30:00  f7a3c2...   48     82     0\n2024-01-15 10:00:00  abc123...   45     78     0\n</code></pre> <p>Three new modules, four new dependencies. But are things getting better or worse? View the trend:</p> <pre><code>pacta history trends . --metric edges\n</code></pre> <pre><code>Edge Count Trend (5 entries)\n============================\n\n 82 \u2502                              \u25cf\n    \u2502               \u25cf--------------\n 79 \u2502    \u25cf----------\n    \u2502\n 76 \u251c\u25cf---\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n      Jan 15                   Jan 22\n\nTrend: \u2191 Increasing (+6 over period)\nFirst: 76 edges (Jan 15)\nLast:  82 edges (Jan 22)\n\nAverage: 79 edges\nMin: 76, Max: 82\n</code></pre> <p>Coupling is climbing. You caught drift early \u2014 before it became a problem someone complains about in a retrospective.</p> <p>Need to share this with the team? Export as an image:</p> <pre><code>pip install pacta[viz]  # one-time install for chart export\npacta history trends . --metric edges --output coupling-trend.png\n</code></pre> <p>This generates a publication-ready chart with trend annotations \u2014 drop it into a PR, a Slack thread, or your architecture docs.</p>"},{"location":"getting-started/#adding-guardrails","title":"Adding Guardrails","text":"<p>You want to protect what you've built. Create <code>rules.pacta.yml</code>:</p> <pre><code>rule:\n  id: no_domain_to_infra\n  name: Domain cannot depend on Infrastructure\n  severity: error\n  target: dependency\n  when:\n    all:\n      - from.layer == domain\n      - to.layer == infra\n  action: forbid\n  message: Domain layer must not import from Infrastructure\n</code></pre> <p>Run a check against your snapshot:</p> <pre><code># Option A: Check the snapshot you already have\npacta check . --rules rules.pacta.yml\n\n# Option B: Or do snapshot + check in one step\npacta scan . --model architecture.yml --rules rules.pacta.yml\n</code></pre> <pre><code>\u2717 2 violations (2 error) [2 new]\n\n  \u2717 ERROR [no_domain_to_infra] @ src/domain/user.py:3:1\n    status: new\n    Domain layer must not import from Infrastructure\n</code></pre> <p>Two violations. But wait \u2014 this is a legacy codebase. You can't fix everything today.</p>"},{"location":"getting-started/#living-with-legacy","title":"Living with Legacy","text":"<p>Save the current state as a baseline:</p> <pre><code># One-step:\npacta scan . --model architecture.yml --rules rules.pacta.yml --save-ref baseline\n\n# Or two-step:\npacta snapshot save . --model architecture.yml --ref baseline\npacta check . --ref baseline --rules rules.pacta.yml\n</code></pre> <p>Now future checks compare against this baseline:</p> <pre><code>pacta check . --rules rules.pacta.yml --baseline baseline\n# Or equivalently:\npacta scan . --model architecture.yml --rules rules.pacta.yml --baseline baseline\n</code></pre> <p>New violations fail CI. Existing ones are tracked but tolerated. You can pay down debt at your own pace while preventing new debt from accumulating.</p> <p>A month later, you check progress:</p> <pre><code>pacta history trends . --metric violations\n</code></pre> <pre><code>Violations Trend (8 entries)\n============================\n\n 12 \u251c\u25cf\n    \u2502 \u25cf---\u25cf\n  8 \u2502      \u25cf---\u25cf\n    \u2502           \u25cf---\u25cf\n  4 \u2502                \u25cf\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n      Feb 01                   Feb 28\n\nTrend: \u2193 Improving (-8 over period)\nFirst: 12 violations (Feb 01)\nLast:  4 violations (Feb 28)\n\nAverage: 7 violations\nMin: 4, Max: 12\n</code></pre> <p>You're winning. Export it for the next retro:</p> <pre><code>pacta history trends . --metric violations --output debt-burndown.png\n</code></pre>"},{"location":"getting-started/#the-bigger-picture","title":"The Bigger Picture","text":"<p>Traditional architecture tools give you a pass/fail at a point in time. Pacta gives you something different: a versioned history of your architecture that you can query, compare, and trend.</p> <p>When someone asks \"when did our architecture start degrading?\" \u2014 you have the answer. When a refactor claims to improve coupling \u2014 you can measure it. When leadership wants proof that technical debt is being addressed \u2014 you have the chart.</p> <p>Architecture stops being something that \"just happens\" and becomes something you observe, understand, and control.</p>"},{"location":"getting-started/#reference","title":"Reference","text":"<p>Project structure:</p> <pre><code>myproject/\n\u251c\u2500\u2500 architecture.yml      # Layer definitions\n\u251c\u2500\u2500 rules.pacta.yml       # Governance rules\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 domain/\n\u2502   \u251c\u2500\u2500 application/\n\u2502   \u2514\u2500\u2500 infra/\n\u2514\u2500\u2500 .pacta/               # Snapshot storage\n</code></pre> <p>Next steps:</p> <ul> <li>CLI Reference \u2014 Commands and options</li> <li>Architecture Model \u2014 Configuration schema</li> <li>Rules DSL \u2014 Rule conditions</li> <li>CI Integration \u2014 Automate in your pipeline</li> </ul>"},{"location":"rules/","title":"Rules DSL","text":"<p>Define architectural rules in <code>rules.pacta.yml</code>.</p>"},{"location":"rules/#rule-structure","title":"Rule Structure","text":"<pre><code>rule:\n  id: rule-id\n  name: Rule Name\n  description: What this rule enforces\n  severity: error | warning | info\n  target: dependency\n  when:\n    all:\n      - condition1\n      - condition2\n  action: forbid | allow | require\n  message: Violation message\n  suggestion: How to fix\n</code></pre>"},{"location":"rules/#fields","title":"Fields","text":"Field Type Required Description <code>id</code> string Yes Unique rule identifier <code>name</code> string Yes Human-readable name <code>description</code> string No Detailed description <code>severity</code> string Yes <code>error</code>, <code>warning</code>, or <code>info</code> <code>target</code> string Yes What to evaluate (e.g., <code>dependency</code>) <code>when</code> object Yes Conditions for the rule <code>action</code> string Yes <code>forbid</code>, <code>allow</code>, or <code>require</code> <code>message</code> string No Message shown on violation (auto-generated if omitted) <code>suggestion</code> string No Remediation guidance"},{"location":"rules/#conditions","title":"Conditions","text":""},{"location":"rules/#layer-conditions","title":"Layer Conditions","text":"<pre><code>from.layer == domain    # Source is domain layer\nto.layer == infra       # Target is infra layer\n</code></pre>"},{"location":"rules/#combining-conditions","title":"Combining Conditions","text":"<pre><code># All conditions must match\nwhen:\n  all:\n    - from.layer == domain\n    - to.layer == infra\n\n# Any condition can match\nwhen:\n  any:\n    - to.layer == domain\n    - to.layer == application\n</code></pre>"},{"location":"rules/#example-clean-architecture-rules","title":"Example: Clean Architecture Rules","text":"<pre><code># Domain cannot depend on Infrastructure\nrule:\n  id: no_domain_to_infra\n  name: Domain must not depend on Infrastructure\n  description: |\n    The domain layer contains pure business logic and should not\n    depend on technical implementation details.\n  severity: error\n  target: dependency\n  when:\n    all:\n      - from.layer == domain\n      - to.layer == infra\n  action: forbid\n  message: Domain layer must not depend on Infrastructure layer\n  suggestion: Use dependency injection and define interfaces in the domain layer\n\n# Domain cannot depend on Application\nrule:\n  id: no_domain_to_application\n  name: Domain must not depend on Application\n  severity: error\n  target: dependency\n  when:\n    all:\n      - from.layer == domain\n      - to.layer == application\n  action: forbid\n  message: Domain layer must not depend on Application layer\n  suggestion: Move shared logic to the domain layer\n\n# Domain cannot depend on UI\nrule:\n  id: no_domain_to_ui\n  name: Domain must not depend on UI\n  severity: error\n  target: dependency\n  when:\n    all:\n      - from.layer == domain\n      - to.layer == ui\n  action: forbid\n  message: Domain layer must not depend on UI layer\n  suggestion: Keep domain models free from presentation concerns\n\n# UI should not directly access Infrastructure\nrule:\n  id: no_ui_to_infra\n  name: UI should not directly access Infrastructure\n  severity: warning\n  target: dependency\n  when:\n    all:\n      - from.layer == ui\n      - to.layer == infra\n  action: forbid\n  message: UI layer should not directly depend on Infrastructure layer\n  suggestion: Access infrastructure through application services instead\n</code></pre>"},{"location":"troubleshooting/","title":"Troubleshooting","text":"<p>Common issues and frequently asked questions about Pacta.</p>"},{"location":"troubleshooting/#common-errors","title":"Common Errors","text":""},{"location":"troubleshooting/#no-analyzers-found","title":"\"No analyzers found\"","text":"<p>Error: <pre><code>Error: No analyzers found for the given repository\n</code></pre></p> <p>Cause: Pacta couldn't find any supported language analyzers for your codebase.</p> <p>Solution:</p> <ol> <li>Ensure you have Python files (<code>.py</code>) in the directories specified in <code>roots</code></li> <li>Check that your <code>architecture.yml</code> has correct <code>roots</code> paths:    <pre><code>containers:\n  myapp:\n    code:\n      roots:\n        - src  # This directory must exist and contain .py files\n</code></pre></li> <li>Verify the paths are relative to your repository root</li> </ol>"},{"location":"troubleshooting/#model-validation-failed","title":"\"Model validation failed\"","text":"<p>Error: <pre><code>Error: Model validation failed: [details]\n</code></pre></p> <p>Cause: Your <code>architecture.yml</code> has invalid structure or missing required fields.</p> <p>Solution:</p> <p>Check for these common issues:</p> <ol> <li> <p>Missing <code>version</code> field (must be <code>1</code>):    <pre><code>version: 1  # Required\nsystem:\n  id: myapp\n</code></pre></p> </li> <li> <p>Missing <code>system.id</code>:    <pre><code>system:\n  id: myapp  # Required\n  name: My Application\n</code></pre></p> </li> <li> <p>Invalid layer patterns (must be valid glob patterns):    <pre><code>layers:\n  domain:\n    patterns:\n      - src/domain/**  # Correct\n      - src/domain/*   # Only matches one level\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#rules-parsing-error","title":"\"Rules parsing error\"","text":"<p>Error: <pre><code>Error: Failed to parse rules file: [details]\n</code></pre></p> <p>Cause: Your <code>rules.pacta.yml</code> has invalid YAML syntax or rule structure.</p> <p>Solution:</p> <ol> <li>Validate YAML syntax (use a YAML linter)</li> <li> <p>Ensure each rule has required fields:    <pre><code>rule:\n  id: my_rule          # Required\n  name: My Rule        # Required\n  severity: error      # Required: error, warning, or info\n  target: dependency   # Required: dependency or node\n  when:                # Required\n    all:\n      - from.layer == domain\n  action: forbid       # Required: forbid or allow\n</code></pre></p> </li> <li> <p>Check condition syntax:    <pre><code># Correct\nwhen:\n  all:\n    - from.layer == domain\n    - to.layer == infra\n\n# Wrong (missing quotes around strings with spaces)\nwhen:\n  all:\n    - from.layer == my domain  # Error!\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#baseline-not-found","title":"\"Baseline not found\"","text":"<p>Error: <pre><code>Error: Baseline 'baseline' not found\n</code></pre></p> <p>Cause: You're trying to compare against a baseline that doesn't exist.</p> <p>Solution:</p> <ol> <li> <p>Create a baseline first:    <pre><code>pacta scan . --model architecture.yml --rules rules.pacta.yml --save-ref baseline\n# Or using the two-step workflow:\npacta snapshot save . --model architecture.yml --ref baseline\npacta check . --ref baseline --rules rules.pacta.yml\n</code></pre></p> </li> <li> <p>Check that <code>.pacta/</code> directory exists and contains snapshots:    <pre><code>ls -la .pacta/snapshots/objects/\nls -la .pacta/snapshots/refs/\n</code></pre></p> </li> <li> <p>If using CI, ensure the <code>.pacta/</code> directory is cached or committed</p> </li> </ol>"},{"location":"troubleshooting/#permission-denied-reading-files","title":"\"Permission denied\" reading files","text":"<p>Error: <pre><code>Error: Permission denied: [file path]\n</code></pre></p> <p>Cause: Pacta doesn't have read access to some files in your repository.</p> <p>Solution:</p> <ol> <li>Check file permissions: <code>ls -la [file]</code></li> <li>Ensure you're running Pacta with appropriate user permissions</li> <li>In CI, verify the checkout step has correct permissions</li> </ol>"},{"location":"troubleshooting/#frequently-asked-questions","title":"Frequently Asked Questions","text":""},{"location":"troubleshooting/#how-do-i-ignore-test-files","title":"How do I ignore test files?","text":"<p>Configure your <code>architecture.yml</code> to exclude test directories from the <code>roots</code>:</p> <pre><code>containers:\n  myapp:\n    code:\n      roots:\n        - src           # Include\n        # - tests       # Don't include tests\n</code></pre> <p>Or, if tests are inside <code>src/</code>, use layer patterns that exclude them:</p> <pre><code>layers:\n  domain:\n    patterns:\n      - src/domain/**\n      - \"!src/domain/tests/**\"  # Exclude tests\n</code></pre>"},{"location":"troubleshooting/#can-i-use-multiple-rules-files","title":"Can I use multiple rules files?","text":"<p>Yes, use the <code>--rules</code> option multiple times:</p> <pre><code>pacta scan . \\\n  --model architecture.yml \\\n  --rules rules/base.pacta.yml \\\n  --rules rules/strict.pacta.yml\n</code></pre> <p>Rules from all files are combined and evaluated together.</p>"},{"location":"troubleshooting/#what-languages-are-supported","title":"What languages are supported?","text":"<p>Currently supported:</p> <ul> <li>Python - Full support via AST analysis</li> </ul> <p>Coming soon:</p> <ul> <li>Java</li> <li>Go</li> <li>C#</li> </ul>"},{"location":"troubleshooting/#how-do-baselines-work","title":"How do baselines work?","text":"<p>Baselines are content-addressed snapshots of your architecture at a point in time. They're stored in <code>.pacta/snapshots/</code>:</p> <ul> <li>Objects (<code>.pacta/snapshots/objects/</code>) - Immutable snapshot files named by 8-char hash</li> <li> <p>Refs (<code>.pacta/snapshots/refs/</code>) - Named pointers (like <code>baseline</code>, <code>latest</code>) to object hashes</p> </li> <li> <p>Create baseline: Saves current violations with a reference name    <pre><code>pacta scan . --save-ref baseline\n</code></pre></p> </li> <li> <p>Compare against baseline: Only reports new violations    <pre><code>pacta scan . --baseline baseline\n</code></pre></p> </li> <li> <p>Violation statuses:</p> </li> <li><code>new</code> - Violation introduced after baseline (fails CI)</li> <li><code>existing</code> - Violation present in baseline (doesn't fail CI)</li> <li><code>fixed</code> - Violation in baseline but now resolved</li> </ul>"},{"location":"troubleshooting/#how-do-i-see-what-changed-between-scans","title":"How do I see what changed between scans?","text":"<p>Use the <code>diff</code> command:</p> <pre><code># Save two snapshots\npacta snapshot save . --ref v1\n# ... make changes ...\npacta snapshot save . --ref v2\n\n# Compare them\npacta diff . --from v1 --to v2\n</code></pre>"},{"location":"troubleshooting/#can-i-run-pacta-on-a-monorepo","title":"Can I run Pacta on a monorepo?","text":"<p>Yes. Define multiple containers in your <code>architecture.yml</code>:</p> <pre><code>containers:\n  service-a:\n    code:\n      roots: [services/service-a/src]\n      layers:\n        domain:\n          patterns: [services/service-a/src/domain/**]\n        infra:\n          patterns: [services/service-a/src/infra/**]\n\n  service-b:\n    code:\n      roots: [services/service-b/src]\n      layers:\n        domain:\n          patterns: [services/service-b/src/domain/**]\n        infra:\n          patterns: [services/service-b/src/infra/**]\n</code></pre>"},{"location":"troubleshooting/#why-am-i-seeing-violations-i-didnt-expect","title":"Why am I seeing violations I didn't expect?","text":"<p>Common causes:</p> <ol> <li> <p>Glob patterns too broad: Check that your layer patterns don't overlap    <pre><code># Overlapping - src/domain/utils.py matches both!\ndomain:\n  patterns: [src/domain/**]\nutils:\n  patterns: [src/**/utils/**]\n</code></pre></p> </li> <li> <p>Transitive dependencies: Module A imports B, B imports C. If A is in domain and C is in infra, you might see violations even if B is in application.</p> </li> <li> <p>Re-exports: Python re-exports (e.g., <code>from .submodule import *</code>) can create unexpected dependencies.</p> </li> </ol> <p>Debug with verbose output: <pre><code>pacta scan . --model architecture.yml --rules rules.pacta.yml -v\n</code></pre></p>"},{"location":"troubleshooting/#how-do-i-track-architecture-metrics-over-time","title":"How do I track architecture metrics over time?","text":"<p>Use the history commands:</p> <pre><code># View timeline of snapshots\npacta history show . --last 20\n\n# View violation trends\npacta history trends . --metric violations\n\n# View coupling trends (edges/nodes ratio)\npacta history trends . --metric density\n\n# Export as image for documentation\npacta history trends . --output trends.png\n</code></pre>"},{"location":"troubleshooting/#whats-the-performance-impact-on-large-codebases","title":"What's the performance impact on large codebases?","text":"<p>Pacta parses Python AST, which is fast but scales with codebase size. For large codebases:</p> <ol> <li>Limit scope: Only include relevant directories in <code>roots</code></li> <li>Use quiet mode: <code>-q</code> reduces output processing time</li> <li>Incremental checks: Consider <code>--mode changed_only</code> (if supported)</li> </ol> <p>Typical performance: - Small projects (&lt;100 files): &lt;1 second - Medium projects (100-1000 files): 1-5 seconds - Large projects (1000+ files): 5-30 seconds</p>"},{"location":"troubleshooting/#getting-help","title":"Getting Help","text":"<p>If you're stuck:</p> <ol> <li>Check the CLI Reference for command options</li> <li>Look at the example project</li> <li>Open an issue on GitHub</li> </ol>"},{"location":"examples/","title":"Examples","text":"<p>Pacta includes several example projects demonstrating different architectural patterns and use cases.</p>"},{"location":"examples/#available-examples","title":"Available Examples","text":"Example Description Best For Simple Layered App Classic N-tier architecture Teams familiar with layered architecture Hexagonal Architecture Ports and Adapters pattern Domain-driven design, high testability Legacy Migration Baseline workflow for brownfield Existing codebases, incremental adoption"},{"location":"examples/#quick-start","title":"Quick Start","text":"<p>Each example includes:</p> <ul> <li><code>architecture.yml</code> - System and layer definitions</li> <li><code>rules.pacta.yml</code> - Architectural constraints</li> <li><code>src/</code> - Sample Python code demonstrating the architecture</li> </ul> <p>To run any example:</p> <pre><code>cd examples/&lt;example-name&gt;\n\n# One-step (scan = snapshot + check):\npacta scan . --model architecture.yml --rules rules.pacta.yml\n\n# Or two-step:\npacta snapshot save . --model architecture.yml\npacta check . --rules rules.pacta.yml\n</code></pre>"},{"location":"examples/#creating-your-own","title":"Creating Your Own","text":"<ol> <li>Copy the example closest to your needs</li> <li>Modify <code>architecture.yml</code> to match your directory structure</li> <li>Adjust <code>rules.pacta.yml</code> for your constraints</li> <li>Run <code>pacta scan</code> and iterate</li> </ol> <p>See the Configuration Reference for full schema documentation.</p>"},{"location":"examples/hexagonal-app/","title":"Hexagonal Architecture Example","text":"<p>This example demonstrates how to use Pacta to enforce Hexagonal Architecture (also known as Ports and Adapters).</p>"},{"location":"examples/hexagonal-app/#architecture-overview","title":"Architecture Overview","text":"<pre><code>flowchart TB\n    subgraph Driving[\"Driving Side (Primary)\"]\n        PA[Primary Adapters&lt;br/&gt;Controllers, CLI, Event Handlers]\n    end\n\n    subgraph Application[\"Application Core\"]\n        IP[Inbound Ports&lt;br/&gt;Use Case Interfaces]\n        subgraph Domain[\"DOMAIN\"]\n            D[Entities&lt;br/&gt;Domain Services]\n        end\n        OP[Outbound Ports&lt;br/&gt;Repository Interfaces]\n    end\n\n    subgraph Driven[\"Driven Side (Secondary)\"]\n        SA[Secondary Adapters&lt;br/&gt;Database, APIs, Queues]\n    end\n\n    PA --&gt;|uses| IP\n    IP --&gt;|calls| D\n    D --&gt;|uses| OP\n    SA -.-&gt;|implements| OP\n\n    style Domain fill:#e3f2fd,stroke:#1565c0,stroke-width:2px\n    style D fill:#bbdefb,stroke:#1565c0\n    style IP fill:#fff8e1,stroke:#f57f17\n    style OP fill:#fff8e1,stroke:#f57f17\n    style PA fill:#f3e5f5,stroke:#7b1fa2\n    style SA fill:#e8f5e9,stroke:#2e7d32</code></pre>"},{"location":"examples/hexagonal-app/#directory-structure","title":"Directory Structure","text":"<pre><code>src/\n\u251c\u2500\u2500 domain/                    # Core business logic (center of hexagon)\n\u2502   \u251c\u2500\u2500 product.py             # Domain entity\n\u2502   \u2514\u2500\u2500 product_service.py     # Domain service\n\u2502\n\u251c\u2500\u2500 ports/\n\u2502   \u251c\u2500\u2500 inbound/               # Driving ports (use case interfaces)\n\u2502   \u2502   \u2514\u2500\u2500 catalog_use_case.py\n\u2502   \u2514\u2500\u2500 outbound/              # Driven ports (repository interfaces)\n\u2502       \u2514\u2500\u2500 product_repository.py\n\u2502\n\u2514\u2500\u2500 adapters/\n    \u251c\u2500\u2500 primary/               # Driving adapters (controllers, CLI)\n    \u2502   \u2514\u2500\u2500 api_controller.py\n    \u2514\u2500\u2500 secondary/             # Driven adapters (database, APIs)\n        \u2514\u2500\u2500 postgres_product_repository.py\n</code></pre>"},{"location":"examples/hexagonal-app/#key-rules","title":"Key Rules","text":"Rule Description Domain \u2192 Adapters Forbidden - Domain must not know about adapters Domain \u2192 Outbound Ports Allowed - Domain uses repository interfaces Ports \u2192 Adapters Forbidden - Ports are interfaces, adapters implement them Primary Adapters \u2192 Domain Warning - Should go through inbound ports Secondary Adapters \u2192 Outbound Ports Allowed - Implements the interface Adapters \u2192 Adapters Forbidden - Adapters should be independent"},{"location":"examples/hexagonal-app/#usage","title":"Usage","text":"<pre><code># Run architecture check\npacta scan . --model architecture.yml --rules rules.pacta.yml\n\n# Expected output (clean architecture):\n# \u2713 0 violations\n</code></pre>"},{"location":"examples/hexagonal-app/#dependency-flow","title":"Dependency Flow","text":"<p>Dependencies always point inward toward the domain:</p> <pre><code>flowchart LR\n    PA[Primary&lt;br/&gt;Adapters] --&gt; IP[Inbound&lt;br/&gt;Ports] --&gt; D((DOMAIN))\n    SA[Secondary&lt;br/&gt;Adapters] --&gt; OP[Outbound&lt;br/&gt;Ports] --&gt; D\n\n    style D fill:#e3f2fd,stroke:#1565c0,stroke-width:2px</code></pre> <p>This ensures: - Domain is isolated and testable - Adapters can be swapped without changing business logic - The application is framework-agnostic</p>"},{"location":"examples/legacy-migration/","title":"Legacy Migration Example","text":"<p>This example demonstrates how to use Pacta's baseline mode to gradually migrate a brownfield codebase to clean architecture without blocking development.</p>"},{"location":"examples/legacy-migration/#the-problem","title":"The Problem","text":"<p>You have a legacy codebase with architectural violations. You want to:</p> <ol> <li>Stop the bleeding - Prevent new violations</li> <li>Track progress - See violations decrease over time</li> <li>Not block development - Existing violations shouldn't fail CI</li> </ol>"},{"location":"examples/legacy-migration/#the-solution-baseline-mode","title":"The Solution: Baseline Mode","text":"<p>Pacta's baseline mode lets you \"snapshot\" current violations and only fail on new violations.</p>"},{"location":"examples/legacy-migration/#architecture","title":"Architecture","text":"<pre><code>flowchart TB\n    subgraph Clean[\"Clean Code (New Architecture)\"]\n        API[API Layer&lt;br/&gt;Controllers]\n        SVC[Service Layer&lt;br/&gt;Business Logic]\n        DATA[Data Layer&lt;br/&gt;Repositories]\n    end\n\n    subgraph Legacy[\"Legacy Code (Tracked via Baseline)\"]\n        LEG[Legacy Modules&lt;br/&gt;Being Migrated]\n    end\n\n    API --&gt;|allowed| SVC\n    SVC --&gt;|allowed| DATA\n    LEG -.-&gt;|allowed&lt;br/&gt;migration| SVC\n    LEG -.-&gt;|allowed&lt;br/&gt;migration| DATA\n    DATA x--x|forbidden| API\n    SVC x--x|forbidden| API\n    API x--x|forbidden| LEG\n    SVC x--x|forbidden| LEG\n\n    style Clean fill:#e8f5e9,stroke:#2e7d32\n    style Legacy fill:#fff3e0,stroke:#ef6c00\n    style API fill:#c8e6c9,stroke:#2e7d32\n    style SVC fill:#c8e6c9,stroke:#2e7d32\n    style DATA fill:#c8e6c9,stroke:#2e7d32\n    style LEG fill:#ffe0b2,stroke:#ef6c00</code></pre>"},{"location":"examples/legacy-migration/#directory-structure","title":"Directory Structure","text":"<pre><code>src/\n\u251c\u2500\u2500 api/                # Clean code - new architecture\n\u2502   \u2514\u2500\u2500 user_controller.py\n\u251c\u2500\u2500 services/           # Clean code - business logic\n\u2502   \u2514\u2500\u2500 user_service.py\n\u251c\u2500\u2500 data/               # Clean code - repositories\n\u2502   \u2514\u2500\u2500 user_repository.py\n\u2514\u2500\u2500 legacy/             # Legacy code - violations tracked via baseline\n    \u2514\u2500\u2500 old_user_handler.py\n</code></pre>"},{"location":"examples/legacy-migration/#workflow","title":"Workflow","text":""},{"location":"examples/legacy-migration/#step-1-run-initial-scan-see-current-violations","title":"Step 1: Run initial scan (see current violations)","text":"<pre><code>pacta scan . --model architecture.yml --rules rules.pacta.yml\n</code></pre> <p>This shows all violations including legacy ones.</p>"},{"location":"examples/legacy-migration/#step-2-create-baseline","title":"Step 2: Create baseline","text":"<pre><code>pacta scan . --model architecture.yml --rules rules.pacta.yml --save-ref baseline\n</code></pre> <p>This saves the current state. Future scans will compare against this.</p>"},{"location":"examples/legacy-migration/#step-3-use-baseline-in-ci","title":"Step 3: Use baseline in CI","text":"<pre><code>pacta scan . --model architecture.yml --rules rules.pacta.yml --baseline baseline\n</code></pre> <p>Now only new violations will fail the build.</p>"},{"location":"examples/legacy-migration/#step-4-track-progress-over-time","title":"Step 4: Track progress over time","text":"<pre><code># View history\npacta history show . --last 10\n\n# View violation trends\npacta history trends . --metric violations\n</code></pre>"},{"location":"examples/legacy-migration/#example-output","title":"Example Output","text":"<p>Without baseline (all violations): <pre><code>\u2717 5 violations (3 error, 2 warning)\n</code></pre></p> <p>With baseline (only new violations): <pre><code>\u2717 5 violations (3 error, 2 warning) [1 new, 4 existing]\n\n  \u2717 ERROR [no_new_to_legacy] New code must not depend on Legacy\n    status: new        \u2190 This is NEW, will fail CI\n\n  \u2717 ERROR [no_service_to_api] Services must not depend on API\n    status: existing   \u2190 This is EXISTING, won't fail CI\n</code></pre></p>"},{"location":"examples/legacy-migration/#migration-strategy","title":"Migration Strategy","text":"<ol> <li>Week 1: Create baseline with current violations</li> <li>Ongoing: All new code must follow rules (CI enforces)</li> <li>Sprint work: Gradually fix legacy violations</li> <li>Track: Use <code>pacta history trends</code> to show progress</li> </ol>"},{"location":"examples/legacy-migration/#key-rules","title":"Key Rules","text":"Rule New Code Legacy Code Services \u2192 API \u274c Forbidden \ud83d\udcca Tracked via baseline Data \u2192 API \u274c Forbidden \ud83d\udcca Tracked via baseline Data \u2192 Services \u274c Forbidden \ud83d\udcca Tracked via baseline New \u2192 Legacy \u274c Forbidden N/A Legacy \u2192 New \u2705 Allowed \u2705 Allowed (migration)"},{"location":"examples/legacy-migration/#tips","title":"Tips","text":"<ol> <li>Start strict: Define rules for your target architecture, not current state</li> <li>Baseline early: Create baseline before enforcing in CI</li> <li>Small fixes: Fix 1-2 violations per sprint</li> <li>Celebrate progress: Use trends to show improvement over time</li> <li>Prevent new debt: CI should always fail on new violations</li> </ol>"},{"location":"examples/simple-layered-app/","title":"Simple Layered App","text":"<p>A classic N-tier layered architecture with four layers demonstrating clean architecture principles.</p>"},{"location":"examples/simple-layered-app/#architecture","title":"Architecture","text":"<pre><code>flowchart TB\n    subgraph Presentation[\"Presentation Layer\"]\n        UI[UI / Controllers]\n    end\n\n    subgraph Business[\"Business Layer\"]\n        APP[Application Services]\n        DOM[Domain Models]\n    end\n\n    subgraph Data[\"Data Layer\"]\n        INFRA[Infrastructure&lt;br/&gt;Repositories, External Services]\n    end\n\n    UI --&gt;|calls| APP\n    APP --&gt;|uses| DOM\n    APP --&gt;|uses| INFRA\n    INFRA -.-&gt;|implements| DOM\n\n    UI x--x|forbidden| DOM\n    UI x--x|forbidden| INFRA\n    DOM x--x|forbidden| INFRA\n\n    style DOM fill:#e3f2fd,stroke:#1565c0,stroke-width:2px\n    style APP fill:#fff8e1,stroke:#f57f17\n    style UI fill:#f3e5f5,stroke:#7b1fa2\n    style INFRA fill:#e8f5e9,stroke:#2e7d32</code></pre>"},{"location":"examples/simple-layered-app/#directory-structure","title":"Directory Structure","text":"<pre><code>src/\n\u251c\u2500\u2500 ui/           # Controllers, API endpoints\n\u251c\u2500\u2500 application/  # Use cases, services\n\u251c\u2500\u2500 domain/       # Business logic, models\n\u2514\u2500\u2500 infra/        # Repositories, database\n</code></pre>"},{"location":"examples/simple-layered-app/#layer-rules","title":"Layer Rules","text":"Rule Description Severity Domain \u2192 Infrastructure Forbidden Error Domain \u2192 Application Forbidden Error Domain \u2192 UI Forbidden Error UI \u2192 Infrastructure Forbidden Warning Infrastructure \u2192 Domain Allowed (implements interfaces) Info Application \u2192 Domain + Infrastructure Allowed Info"},{"location":"examples/simple-layered-app/#usage","title":"Usage","text":"<pre><code>cd examples/simple-layered-app\n\n# Run architecture check\npacta scan . --model architecture.yml --rules rules.pacta.yml\n\n# Save baseline\npacta scan . --model architecture.yml --rules rules.pacta.yml --save-ref baseline\n\n# Compare against baseline\npacta scan . --model architecture.yml --rules rules.pacta.yml --baseline baseline\n</code></pre>"},{"location":"examples/simple-layered-app/#key-principles","title":"Key Principles","text":"<ol> <li>Dependency Inversion: Domain doesn't depend on infrastructure details</li> <li>Separation of Concerns: Each layer has a single responsibility</li> <li>Testability: Domain can be tested without infrastructure</li> <li>Flexibility: Infrastructure can be swapped without changing domain</li> </ol>"}]}